<head>
  <link rel="stylesheet" href="..//styles.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Kings&family=Luxurious+Script&display=swap"
    rel="stylesheet"
  />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/p5.min.js"></script>
</head>
<body>
  
  <div class="event-container">
    <div class="eventDescription__container">
      <a href="..//index.html" class="home-arrow">
  &#8592;
</a>
      <h3>Event:</h3>
      <h1>Kimberley’s 28th Birthday</h1>
      <img
        src="../mirror.jpg"
        alt="Kimberley's Birthday Event"
        class="birthday__img"
      />
<div class="event-details">
  <p id="info">16:00-20:00, Sunday 27th of April, My House</p>
</div>
<hr />
      <p id="description" class="mb-2">
        I've deided i'm entering the "romancing myself era" so I want to celebrate by hearing the cute people in my life read their beautiful
        words out loud. 28 is going to be my softest year yet. You don’t have to
        read anything, just come, listen, and soak in the words. But if you’d
        like to share something; a poem, a letter, a short story, a text, or
        even lyrics you love, please add your name to the lineup below. As much as you can fit into 10mins ish (or less).
      </p>

    <form id="signupForm" class="mb-2">
      <input
        type="text"
        id="nameInput"
        placeholder="Enter your name"
        required
      />
      <button class= "line-up" id="submit">Join the lineup</button>
    </form>

    <h1>Lineup:</h1>
    <ul id="lineupList" ></ul>
    <p class="mb-3">(This order does not represent the order on the day)</p>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const form = document.getElementById("signupForm");
        const nameInput = document.getElementById("nameInput");
        const lineupList = document.getElementById("lineupList");

        // Assign a unique user ID if they don’t have one
        let userId = localStorage.getItem("userId");
        if (!userId) {
          userId =
            Date.now().toString() + Math.random().toString(36).substring(2);
          localStorage.setItem("userId", userId);
        }

        // Load saved names from localStorage
        let savedEntries = JSON.parse(localStorage.getItem("lineup")) || [];
        savedEntries.forEach(({ name, id }) => addNameToList(name, id));

        form.addEventListener("submit", function (event) {
          event.preventDefault();
          const name = nameInput.value.trim();

          if (name && !savedEntries.some((entry) => entry.name === name)) {
            const newEntry = { name, id: userId };
            savedEntries.push(newEntry);
            localStorage.setItem("lineup", JSON.stringify(savedEntries));
            addNameToList(name, userId);
            nameInput.value = "";
          }
        });

        function addNameToList(name, id) {
          const li = document.createElement("li");
          li.textContent = name;

          // Only show the remove button if the user added this name
          if (id === userId) {
            const removeBtn = document.createElement("button");
            removeBtn.textContent = "x";
            removeBtn.style.marginLeft = "10px";
            removeBtn.style.cursor = "pointer";
            removeBtn.onclick = function () {
              lineupList.removeChild(li);
              savedEntries = savedEntries.filter(
                (entry) => entry.name !== name
              );
              localStorage.setItem("lineup", JSON.stringify(savedEntries));
            };
            li.appendChild(removeBtn);
          }

          lineupList.appendChild(li);
        }
      });
    </script>
        <script src="..//trails.js"></script>
  </div>
</body>
